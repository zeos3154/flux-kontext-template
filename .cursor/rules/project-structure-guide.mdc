---
description: 
globs: 
alwaysApply: true
---
# FluxKontext é¡¹ç›®ç»“æ„å®Œå…¨æŒ‡å— ğŸ“

## ğŸ¯ æ–‡ä»¶å¤¹ç»„ç»‡é€»è¾‘

### æ ¹ç›®å½•æ ¸å¿ƒæ–‡ä»¶
- [package.json](mdc:package.json) - é¡¹ç›®ä¾èµ–ç®¡ç†ï¼Œç›¸å½“äº"è´­ç‰©æ¸…å•"
- [next.config.js](mdc:next.config.js) - Next.jsé…ç½®ï¼Œå‘Šè¯‰æ¡†æ¶æ€ä¹ˆå·¥ä½œ
- [tailwind.config.ts](mdc:tailwind.config.ts) - æ ·å¼é…ç½®ï¼Œæ§åˆ¶ç½‘ç«™å¤–è§‚
- [middleware.ts](mdc:middleware.ts) - ä¸­é—´ä»¶ï¼Œå¤„ç†è¯·æ±‚å‰çš„é€»è¾‘
- [env.example](mdc:env.example) - ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼Œé¡¹ç›®éœ€è¦çš„å¯†é’¥é…ç½®

## ğŸ—ï¸ src/ ç›®å½•è¯¦è§£

### ğŸ“± app/ - é¡µé¢è·¯ç”± (Next.js App Router)
```
src/app/
â”œâ”€â”€ layout.tsx          # å…¨å±€å¸ƒå±€ï¼Œæ‰€æœ‰é¡µé¢çš„"å¤–å£³"
â”œâ”€â”€ page.tsx           # é¦–é¡µ (/)
â”œâ”€â”€ globals.css        # å…¨å±€æ ·å¼
â”œâ”€â”€ generate/          # ç”Ÿæˆé¡µé¢ (/generate)
â”œâ”€â”€ pricing/           # å®šä»·é¡µé¢ (/pricing)
â”œâ”€â”€ dashboard/         # ä»ªè¡¨æ¿ (/dashboard)
â””â”€â”€ api/              # åç«¯APIæ¥å£
    â”œâ”€â”€ generate/     # å›¾åƒç”ŸæˆAPI
    â”œâ”€â”€ auth/         # è®¤è¯API
    â””â”€â”€ payment/      # æ”¯ä»˜API
```

**é‡è¦æ¦‚å¿µ**: Next.jsçš„æ–‡ä»¶ç³»ç»Ÿè·¯ç”±
- æ–‡ä»¶å¤¹åç§° = URLè·¯å¾„
- `page.tsx` = è¯¥è·¯å¾„çš„é¡µé¢ç»„ä»¶
- `layout.tsx` = è¯¥è·¯å¾„åŠå­è·¯å¾„çš„å¸ƒå±€

### ğŸ§© components/ - å¯å¤ç”¨ç»„ä»¶
```
src/components/
â”œâ”€â”€ FluxKontextGenerator.tsx  # ğŸ¯ ä¸»è¦åŠŸèƒ½ç»„ä»¶ (2987è¡Œ)
â”œâ”€â”€ Navigation.tsx           # å¯¼èˆªæ 
â”œâ”€â”€ PricingContent.tsx       # å®šä»·é¡µé¢å†…å®¹
â”œâ”€â”€ StandardTurnstile.tsx    # å®‰å…¨éªŒè¯ç»„ä»¶
â”œâ”€â”€ ui/                      # åŸºç¡€UIç»„ä»¶åº“
â”‚   â”œâ”€â”€ button.tsx          # æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ input.tsx           # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â””â”€â”€ card.tsx            # å¡ç‰‡ç»„ä»¶
â””â”€â”€ providers/              # React Contextæä¾›è€…
```

**ç»„ä»¶åˆ†ç±»é€»è¾‘**:
- ä¸šåŠ¡ç»„ä»¶: åŒ…å«ä¸šåŠ¡é€»è¾‘çš„å¤æ‚ç»„ä»¶
- UIç»„ä»¶: çº¯å±•ç¤ºçš„åŸºç¡€ç»„ä»¶
- æä¾›è€…: å…¨å±€çŠ¶æ€ç®¡ç†

### ğŸ“š lib/ - ä¸šåŠ¡é€»è¾‘åº“
```
src/lib/
â”œâ”€â”€ flux-kontext.ts      # ğŸ¯ AIå›¾åƒç”Ÿæˆæ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ auth.ts              # ç”¨æˆ·è®¤è¯é€»è¾‘
â”œâ”€â”€ database.ts          # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ payment.ts           # æ”¯ä»˜å¤„ç†
â”œâ”€â”€ user-tiers.ts        # ç”¨æˆ·ç­‰çº§ç®¡ç†
â”œâ”€â”€ services/            # å¤–éƒ¨æœåŠ¡é›†æˆ
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â””â”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
```

**ä¸šåŠ¡é€»è¾‘åˆ†å±‚**:
- æ ¸å¿ƒæœåŠ¡: ç›´æ¥å¤„ç†ä¸šåŠ¡çš„ä¸»è¦é€»è¾‘
- å·¥å…·å‡½æ•°: å¯å¤ç”¨çš„è¾…åŠ©å‡½æ•°
- ç±»å‹å®šä¹‰: TypeScriptæ¥å£å’Œç±»å‹

## ğŸ”— æ–‡ä»¶å…³ç³»å›¾

```
ç”¨æˆ·è®¿é—®é¡µé¢
    â†“
app/page.tsx (æœåŠ¡å™¨ç»„ä»¶)
    â†“
components/HomeContent.tsx (å±•ç¤ºç»„ä»¶)
    â†“
components/FluxKontextGenerator.tsx (æ ¸å¿ƒåŠŸèƒ½)
    â†“
lib/flux-kontext.ts (AIæœåŠ¡è°ƒç”¨)
    â†“
app/api/generate/route.ts (APIç«¯ç‚¹)
```

## ğŸ¨ ç»„ä»¶è®¾è®¡æ¨¡å¼

### é¡µé¢ç»„ä»¶åˆ†ç¦»æ¨¡å¼
```typescript
// âœ… æ¨è: æœåŠ¡å™¨ç»„ä»¶ + å®¢æˆ·ç«¯ç»„ä»¶åˆ†ç¦»
// app/generate/page.tsx (æœåŠ¡å™¨ç»„ä»¶)
export const metadata = { title: "Generate" }
export default function GeneratePage() {
  return <GenerateContent />
}

// components/GenerateContent.tsx (å®¢æˆ·ç«¯ç»„ä»¶)
"use client"
export function GenerateContent() {
  // äº¤äº’é€»è¾‘åœ¨è¿™é‡Œ
}
```

### APIè·¯ç”±æ¨¡å¼
```typescript
// app/api/generate/route.ts
export async function POST(request: Request) {
  // å¤„ç†POSTè¯·æ±‚
  return NextResponse.json({ success: true })
}
```

## ğŸ“ å‘½åçº¦å®š

### æ–‡ä»¶å‘½å
- **ç»„ä»¶æ–‡ä»¶**: PascalCase (UserProfile.tsx)
- **å·¥å…·æ–‡ä»¶**: kebab-case (user-utils.ts)
- **é¡µé¢æ–‡ä»¶**: page.tsx (å›ºå®šåç§°)
- **å¸ƒå±€æ–‡ä»¶**: layout.tsx (å›ºå®šåç§°)

### ç›®å½•ç»“æ„
- **åŠŸèƒ½æ¨¡å—**: æŒ‰åŠŸèƒ½åˆ†ç»„ (auth/, payment/)
- **ç±»å‹åˆ†ç»„**: æŒ‰æ–‡ä»¶ç±»å‹åˆ†ç»„ (components/, lib/)
- **è·¯ç”±ç»“æ„**: é•œåƒURLç»“æ„ (app/dashboard/)

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### æ–°å¢åŠŸèƒ½çš„æ­¥éª¤
1. **åˆ›å»ºé¡µé¢**: åœ¨ `app/` ä¸‹æ·»åŠ è·¯ç”±
2. **ç¼–å†™ç»„ä»¶**: åœ¨ `components/` ä¸‹åˆ›å»ºUI
3. **æ·»åŠ é€»è¾‘**: åœ¨ `lib/` ä¸‹ç¼–å†™ä¸šåŠ¡é€»è¾‘
4. **åˆ›å»ºAPI**: åœ¨ `app/api/` ä¸‹æ·»åŠ æ¥å£
5. **æ›´æ–°ç±»å‹**: åœ¨ `lib/types/` ä¸‹å®šä¹‰ç±»å‹

### è°ƒè¯•è·¯å¾„
1. **æ£€æŸ¥é¡µé¢**: app/ ç›®å½•ä¸‹çš„é¡µé¢ç»„ä»¶
2. **æ£€æŸ¥ç»„ä»¶**: components/ ç›®å½•ä¸‹çš„ç»„ä»¶é€»è¾‘
3. **æ£€æŸ¥API**: app/api/ ç›®å½•ä¸‹çš„æ¥å£
4. **æ£€æŸ¥é€»è¾‘**: lib/ ç›®å½•ä¸‹çš„ä¸šåŠ¡ä»£ç 

## ğŸ“ å­¦ä¹ å»ºè®®

### æŒ‰é‡è¦æ€§å­¦ä¹ æ–‡ä»¶
1. **å…¥é—¨çº§**: [src/app/page.tsx](mdc:src/app/page.tsx) - ç®€å•é¡µé¢ç»„ä»¶
2. **è¿›é˜¶çº§**: [src/components/HomeContent.tsx](mdc:src/components/HomeContent.tsx) - å±•ç¤ºç»„ä»¶
3. **é«˜çº§**: [src/components/FluxKontextGenerator.tsx](mdc:src/components/FluxKontextGenerator.tsx) - å¤æ‚ä¸šåŠ¡ç»„ä»¶
4. **ä¸“å®¶çº§**: [src/lib/flux-kontext.ts](mdc:src/lib/flux-kontext.ts) - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

è®°ä½: ä¸è¦è¢«æ–‡ä»¶æ•°é‡å“åˆ°ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰å®ƒçš„èŒè´£ï¼Œç†è§£äº†èŒè´£å°±ç†è§£äº†æ•´ä½“æ¶æ„ï¼
