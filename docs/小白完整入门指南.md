# ğŸ“ å°ç™½å®Œæ•´å…¥é—¨æŒ‡å— - ä»é›¶å¼€å§‹ç†è§£AIè§†é¢‘ç”Ÿæˆé¡¹ç›®

## ğŸ“š ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ–‡ä»¶å¤¹ç»“æ„è¯¦è§£](#æ–‡ä»¶å¤¹ç»“æ„è¯¦è§£)
3. [æ ¸å¿ƒæŠ€æœ¯æ ˆç†è§£](#æ ¸å¿ƒæŠ€æœ¯æ ˆç†è§£)
4. [æ•°æ®åº“è®¾è®¡è¯¦è§£](#æ•°æ®åº“è®¾è®¡è¯¦è§£)
5. [åŒæ”¯ä»˜ç³»ç»ŸåŸç†](#åŒæ”¯ä»˜ç³»ç»ŸåŸç†)
6. [å®‰å…¨æ¼æ´æ£€æŸ¥](#å®‰å…¨æ¼æ´æ£€æŸ¥)
7. [APIé…ç½®æŒ‡å—](#apié…ç½®æŒ‡å—)
8. [å®é™…æ“ä½œæ¼”ç»ƒ](#å®é™…æ“ä½œæ¼”ç»ƒ)

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### è¿™æ˜¯ä»€ä¹ˆé¡¹ç›®ï¼Ÿ
è¿™æ˜¯ä¸€ä¸ª**AIè§†é¢‘ç”ŸæˆSaaSå¹³å°**ï¼Œç”¨æˆ·å¯ä»¥ï¼š
- ğŸ¬ è¾“å…¥æ–‡å­—æè¿°ï¼ŒAIç”Ÿæˆè§†é¢‘
- ğŸ’³ è´­ä¹°ç§¯åˆ†æˆ–è®¢é˜…æœåŠ¡
- ğŸ‘¤ æ³¨å†Œç™»å½•ç®¡ç†è´¦æˆ·
- ğŸ“Š æŸ¥çœ‹ç”Ÿæˆå†å²å’Œä½¿ç”¨ç»Ÿè®¡

### æŠ€æœ¯æ¶æ„ç®€å›¾
```
ç”¨æˆ·æµè§ˆå™¨ â†’ Next.jså‰ç«¯ â†’ APIæ¥å£ â†’ æ•°æ®åº“
                â†“
            AIè§†é¢‘ç”ŸæˆæœåŠ¡
                â†“
            åŒæ”¯ä»˜ç³»ç»Ÿ (Stripe + Creem)
```

---

## ğŸ“ æ–‡ä»¶å¤¹ç»“æ„è¯¦è§£

### ğŸ—ï¸ é¡¹ç›®æ ¹ç›®å½•
```
veo3.us/
â”œâ”€â”€ ğŸ“ src/                    # æºä»£ç ç›®å½•ï¼ˆæœ€é‡è¦ï¼‰
â”œâ”€â”€ ğŸ“ prisma/                 # æ•°æ®åº“é…ç½®
â”œâ”€â”€ ğŸ“ docs/                   # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ ğŸ“ scripts/                # å·¥å…·è„šæœ¬
â”œâ”€â”€ ğŸ“ template/               # å‚è€ƒæ¨¡æ¿
â”œâ”€â”€ ğŸ“„ package.json            # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ ğŸ“„ README.md               # é¡¹ç›®è¯´æ˜
```

### ğŸ¯ æ ¸å¿ƒä»£ç ç›®å½• (src/)
```
src/
â”œâ”€â”€ ğŸ“ app/                    # Next.js 13+ App Router
â”‚   â”œâ”€â”€ ğŸ“ api/               # åç«¯APIæ¥å£
â”‚   â”œâ”€â”€ ğŸ“ auth/              # ç™»å½•ç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ ğŸ“ dashboard/         # ç”¨æˆ·ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ ğŸ“ pricing/           # å®šä»·é¡µé¢
â”‚   â””â”€â”€ ğŸ“„ page.tsx           # é¦–é¡µ
â”œâ”€â”€ ğŸ“ components/            # å¯å¤ç”¨ç»„ä»¶
â”œâ”€â”€ ğŸ“ lib/                   # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ ğŸ“ config/           # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ services/         # ä¸šåŠ¡æœåŠ¡
â”‚   â””â”€â”€ ğŸ“ utils/            # å·¥å…·å‡½æ•°
â””â”€â”€ ğŸ“ types/                # TypeScriptç±»å‹å®šä¹‰
```

---

## ğŸ§  æ ¸å¿ƒæŠ€æœ¯æ ˆç†è§£

### å‰ç«¯æŠ€æœ¯
```typescript
// React + Next.js 13+ (App Router)
// ç°ä»£åŒ–çš„Reactæ¡†æ¶ï¼Œæ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“

// Tailwind CSS
// å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶ï¼Œå¿«é€Ÿæ„å»ºUI

// TypeScript
// JavaScriptçš„è¶…é›†ï¼Œæä¾›ç±»å‹å®‰å…¨
```

### åç«¯æŠ€æœ¯
```typescript
// Next.js API Routes
// åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­æä¾›åç«¯API

// NextAuth.js
// è®¤è¯è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§ç™»å½•æ–¹å¼

// Prisma ORM
// ç°ä»£åŒ–çš„æ•°æ®åº“å·¥å…·ï¼Œç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
```

### æ•°æ®åº“
```sql
-- PostgreSQL
-- å¼ºå¤§çš„å…³ç³»å‹æ•°æ®åº“

-- Supabase
-- PostgreSQLçš„äº‘æœåŠ¡ï¼Œæä¾›å®æ—¶åŠŸèƒ½
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡è¯¦è§£

### ğŸ“Š æ ¸å¿ƒæ•°æ®è¡¨

#### ğŸ‘¤ **ç”¨æˆ·ç›¸å…³è¡¨**
```sql
-- ç”¨æˆ·ä¸»è¡¨
User {
  id: ç”¨æˆ·å”¯ä¸€ID
  email: é‚®ç®±ï¼ˆç™»å½•ç”¨ï¼‰
  name: ç”¨æˆ·å
  credits: ç§¯åˆ†ä½™é¢
  signinCount: ç™»å½•æ¬¡æ•°
  preferredPaymentProvider: åå¥½æ”¯ä»˜æ–¹å¼
}

-- ç™»å½•è´¦æˆ·è¡¨ï¼ˆNextAuthä¸“ç”¨ï¼‰
Account {
  provider: ç™»å½•æä¾›å•†ï¼ˆgoogle/githubï¼‰
  providerAccountId: ç¬¬ä¸‰æ–¹è´¦æˆ·ID
  access_token: è®¿é—®ä»¤ç‰Œ
}

-- ä¼šè¯è¡¨ï¼ˆNextAuthä¸“ç”¨ï¼‰
Session {
  sessionToken: ä¼šè¯ä»¤ç‰Œ
  expires: è¿‡æœŸæ—¶é—´
}
```

#### ğŸ’³ **æ”¯ä»˜ç›¸å…³è¡¨**
```sql
-- æ”¯ä»˜è®¢å•è¡¨ï¼ˆæ ¸å¿ƒï¼ï¼‰
PaymentOrder {
  id: è®¢å•ID
  userId: ç”¨æˆ·ID
  amount: é‡‘é¢ï¼ˆåˆ†ï¼‰
  currency: è´§å¸ï¼ˆUSD/CNYï¼‰
  status: çŠ¶æ€ï¼ˆpending/completed/failedï¼‰
  paymentProvider: æ”¯ä»˜æä¾›å•†ï¼ˆstripe/creemï¼‰
  
  -- Stripeä¸“ç”¨å­—æ®µ
  stripeSessionId: Stripeä¼šè¯ID
  stripePaymentIntentId: Stripeæ”¯ä»˜æ„å›¾ID
  
  -- Creemä¸“ç”¨å­—æ®µ
  creemCheckoutId: Creemç»“è´¦ID
  creemPaymentId: Creemæ”¯ä»˜ID
  
  -- æ”¯ä»˜è¯¦æƒ…
  paidEmail: å®é™…æ”¯ä»˜é‚®ç®±
  paidDetail: æ”¯ä»˜è¯¦æƒ…JSON
}

-- è®¢é˜…è¡¨
Subscription {
  userId: ç”¨æˆ·ID
  planId: å¥—é¤IDï¼ˆbasic/plus/proï¼‰
  status: çŠ¶æ€ï¼ˆactive/cancelledï¼‰
  paymentProvider: æ”¯ä»˜æä¾›å•†
  stripeSubscriptionId: Stripeè®¢é˜…ID
  creemSubscriptionId: Creemè®¢é˜…ID
}
```

#### ğŸ¬ **ä¸šåŠ¡ç›¸å…³è¡¨**
```sql
-- è§†é¢‘ç”Ÿæˆè®°å½•è¡¨
VideoGeneration {
  userId: ç”¨æˆ·ID
  prompt: ç”¨æˆ·è¾“å…¥çš„æè¿°
  videoUrl: ç”Ÿæˆçš„è§†é¢‘é“¾æ¥
  status: ç”ŸæˆçŠ¶æ€ï¼ˆpending/completed/failedï¼‰
  creditsUsed: æ¶ˆè€—çš„ç§¯åˆ†
}

-- ç§¯åˆ†äº¤æ˜“è®°å½•è¡¨
CreditTransaction {
  userId: ç”¨æˆ·ID
  amount: ç§¯åˆ†å˜åŒ–æ•°é‡
  type: äº¤æ˜“ç±»å‹ï¼ˆpurchase/usage/refundï¼‰
  description: äº¤æ˜“æè¿°
  paymentOrderId: å…³è”çš„æ”¯ä»˜è®¢å•
}
```

### ğŸ” **é‡è¦ï¼åŒæ”¯ä»˜ç³»ç»Ÿæ•°æ®åº“è®¾è®¡**

ä½ é—®å¾—å¾ˆå¯¹ï¼ä¸¤ä¸ªæ”¯ä»˜ç³»ç»Ÿç¡®å®æœ‰ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œä½†æˆ‘ä»¬ç”¨äº†**ç»Ÿä¸€æ•°æ®åº“è®¾è®¡**ï¼š

```sql
-- ç»Ÿä¸€è®¢å•è¡¨è®¾è®¡
PaymentOrder {
  -- é€šç”¨å­—æ®µ
  paymentProvider: "stripe" | "creem"  -- åŒºåˆ†æ”¯ä»˜ç³»ç»Ÿ
  
  -- Stripeä¸“ç”¨å­—æ®µï¼ˆåªæœ‰Stripeè®¢å•æ‰å¡«å†™ï¼‰
  stripeSessionId: String?
  stripePaymentIntentId: String?
  stripeCustomerId: String?
  
  -- Creemä¸“ç”¨å­—æ®µï¼ˆåªæœ‰Creemè®¢å•æ‰å¡«å†™ï¼‰
  creemCheckoutId: String?
  creemPaymentId: String?
  creemCustomerId: String?
}
```

**ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**
- âœ… **æŸ¥è¯¢ç®€å•**: ä¸€æ¡SQLè·å–ç”¨æˆ·æ‰€æœ‰è®¢å•
- âœ… **æ•°æ®å®Œæ•´**: ç”¨æˆ·è®¢å•å†å²ä¸åˆ†æ•£
- âœ… **åˆ‡æ¢æ— ç¼**: è‡ªåŠ¨åˆ‡æ¢æ—¶è®¢å•è®°å½•è¿ç»­
- âœ… **ç»Ÿè®¡æ–¹ä¾¿**: è½»æ¾ç»Ÿè®¡æ€»æ”¶å…¥ã€è®¢å•æ•°

---

## ğŸ”„ åŒæ”¯ä»˜ç³»ç»ŸåŸç†

### ğŸ¯ **ä¸ºä»€ä¹ˆéœ€è¦åŒæ”¯ä»˜ç³»ç»Ÿï¼Ÿ**

#### ğŸŒ **åœ°åŒºå·®å¼‚**
```typescript
// ä¸­å›½ç”¨æˆ· â†’ Creemï¼ˆæ”¯æŒæ”¯ä»˜å®ã€å¾®ä¿¡ï¼‰
// å›½é™…ç”¨æˆ· â†’ Stripeï¼ˆæ”¯æŒå…¨çƒä¿¡ç”¨å¡ï¼‰
```

#### ğŸ’° **æˆæœ¬ä¼˜åŒ–**
```typescript
// Stripe: 2.9% + $0.30 æ‰‹ç»­è´¹
// Creem: æ›´ä½çš„æ‰‹ç»­è´¹ï¼Œé€‚åˆä¸­å›½å¸‚åœº
```

#### ğŸ›¡ï¸ **é£é™©åˆ†æ•£**
```typescript
// ä¸€ä¸ªç³»ç»Ÿæ•…éšœæ—¶ï¼Œå¦ä¸€ä¸ªç»§ç»­å·¥ä½œ
// é¿å…å•ç‚¹æ•…éšœå¯¼è‡´æ”¶å…¥æŸå¤±
```

### ğŸ”§ **åŒæ”¯ä»˜ç³»ç»Ÿå·¥ä½œæµç¨‹**

#### 1ï¸âƒ£ **ç”¨æˆ·å‘èµ·æ”¯ä»˜**
```typescript
// ç”¨æˆ·ç‚¹å‡»"è´­ä¹°"æŒ‰é’®
// â†“
// ç³»ç»Ÿæ ¹æ®é…ç½®é€‰æ‹©æ”¯ä»˜æä¾›å•†
function determinePaymentProvider(userId, userPreference) {
  // æ£€æŸ¥é…ç½®æ–‡ä»¶
  const config = PAYMENT_CONFIG
  
  // ç»´æŠ¤æ¨¡å¼ï¼Ÿ
  if (config.MAINTENANCE_MODE) return null
  
  // å¼ºåˆ¶ä½¿ç”¨æŸä¸ªæä¾›å•†ï¼Ÿ
  if (config.FORCE_PROVIDER) return config.FORCE_PROVIDER
  
  // ç”¨æˆ·é€‰æ‹©ï¼Ÿ
  if (userPreference && config.ALLOW_USER_CHOICE) {
    return userPreference
  }
  
  // é»˜è®¤æä¾›å•†
  return config.DEFAULT_PROVIDER
}
```

#### 2ï¸âƒ£ **åˆ›å»ºæ”¯ä»˜ä¼šè¯**
```typescript
// Stripeæµç¨‹
if (provider === "stripe") {
  const session = await stripe.checkout.sessions.create({
    line_items: [{ price_data: {...}, quantity: 1 }],
    mode: "payment",
    success_url: "https://yoursite.com/success",
    cancel_url: "https://yoursite.com/cancel"
  })
  
  // ä¿å­˜åˆ°æ•°æ®åº“
  await prisma.paymentOrder.create({
    data: {
      userId,
      paymentProvider: "stripe",
      stripeSessionId: session.id,  // Stripeä¸“ç”¨å­—æ®µ
      amount,
      status: "pending"
    }
  })
}

// Creemæµç¨‹
if (provider === "creem") {
  const response = await fetch(CREEM_API_URL + "/checkouts", {
    method: "POST",
    headers: { "x-api-key": CREEM_API_KEY },
    body: JSON.stringify({
      product_id: productId,
      customer: { email },
      metadata: { user_id: userId }
    })
  })
  
  // ä¿å­˜åˆ°æ•°æ®åº“
  await prisma.paymentOrder.create({
    data: {
      userId,
      paymentProvider: "creem",
      creemCheckoutId: response.id,  // Creemä¸“ç”¨å­—æ®µ
      amount,
      status: "pending"
    }
  })
}
```

#### 3ï¸âƒ£ **å¤„ç†æ”¯ä»˜ç»“æœ**
```typescript
// ä¸¤ä¸ªç‹¬ç«‹çš„Webhookå¤„ç†å™¨

// Stripe Webhook: /api/webhooks/stripe
export async function POST(req: Request) {
  const event = stripe.webhooks.constructEvent(body, signature, secret)
  
  if (event.type === 'checkout.session.completed') {
    const session = event.data.object
    
    // æ›´æ–°è®¢å•çŠ¶æ€
    await prisma.paymentOrder.update({
      where: { stripeSessionId: session.id },
      data: { 
        status: "completed",
        paidAt: new Date(),
        paidDetail: JSON.stringify(session)
      }
    })
    
    // æ·»åŠ ç§¯åˆ†
    await addUserCredits(session.metadata.userId, session.metadata.credits)
  }
}

// Creem Webhook: /api/webhooks/creem
export async function POST(req: Request) {
  const event = JSON.parse(body)
  
  if (event.eventType === 'checkout.completed') {
    const checkout = event.object
    
    // æ›´æ–°è®¢å•çŠ¶æ€
    await prisma.paymentOrder.update({
      where: { creemCheckoutId: checkout.id },
      data: { 
        status: "completed",
        paidAt: new Date(),
        paidDetail: JSON.stringify(checkout)
      }
    })
    
    // æ·»åŠ ç§¯åˆ†
    await addUserCredits(checkout.metadata.user_id, checkout.metadata.credits)
  }
}
```

---

## ğŸ”’ å®‰å…¨æ¼æ´æ£€æŸ¥

### ğŸš¨ **å¸¸è§å®‰å…¨é£é™©**

#### 1ï¸âƒ£ **æ”¯ä»˜å‚æ•°ç¯¡æ”¹**
```typescript
// âŒ å±é™©ï¼šç›´æ¥ä¿¡ä»»å‰ç«¯ä¼ æ¥çš„ä»·æ ¼
const { amount, productId } = await req.json()
await createPayment({ amount, productId })  // ç”¨æˆ·å¯èƒ½ç¯¡æ”¹ä»·æ ¼ï¼

// âœ… å®‰å…¨ï¼šä»æœåŠ¡ç«¯éªŒè¯ä»·æ ¼
const product = await getProductFromDatabase(productId)
if (product.price !== amount) {
  throw new Error("ä»·æ ¼ä¸åŒ¹é…ï¼Œå¯èƒ½å­˜åœ¨ç¯¡æ”¹")
}
```

#### 2ï¸âƒ£ **Webhookä¼ªé€ **
```typescript
// âŒ å±é™©ï¼šä¸éªŒè¯Webhookç­¾å
export async function POST(req: Request) {
  const event = await req.json()
  // ç›´æ¥å¤„ç†ï¼Œå¯èƒ½è¢«ä¼ªé€ ï¼
  await processPayment(event)
}

// âœ… å®‰å…¨ï¼šéªŒè¯ç­¾å
export async function POST(req: Request) {
  const signature = req.headers.get("stripe-signature")
  const event = stripe.webhooks.constructEvent(body, signature, secret)
  // åªæœ‰éªŒè¯é€šè¿‡çš„äº‹ä»¶æ‰å¤„ç†
  await processPayment(event)
}
```

#### 3ï¸âƒ£ **ç”¨æˆ·æƒé™æ£€æŸ¥**
```typescript
// âŒ å±é™©ï¼šä¸æ£€æŸ¥ç”¨æˆ·æƒé™
export async function GET(req: Request) {
  const { userId } = await req.json()
  const orders = await getOrdersByUserId(userId)  // ä»»ä½•äººéƒ½èƒ½æŸ¥çœ‹ä»»ä½•ç”¨æˆ·çš„è®¢å•ï¼
  return Response.json(orders)
}

// âœ… å®‰å…¨ï¼šéªŒè¯ç”¨æˆ·èº«ä»½
export async function GET(req: Request) {
  const session = await getServerSession(authOptions)
  if (!session?.user?.id) {
    return Response.json({ error: "æœªç™»å½•" }, { status: 401 })
  }
  
  const orders = await getOrdersByUserId(session.user.id)  // åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è®¢å•
  return Response.json(orders)
}
```

### ğŸ” **å®‰å…¨æ£€æŸ¥æ¸…å•**

#### âœ… **ç¯å¢ƒå˜é‡å®‰å…¨**
```bash
# æ£€æŸ¥ .env.local æ–‡ä»¶
# ç¡®ä¿æ•æ„Ÿä¿¡æ¯ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 

# âœ… æ­£ç¡®
STRIPE_PRIVATE_KEY=sk_test_...
CREEM_API_KEY=your_secret_key

# âŒ é”™è¯¯ï¼šåœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
const STRIPE_KEY = "sk_test_hardcoded_key"  // å±é™©ï¼
```

#### âœ… **APIè·¯ç”±ä¿æŠ¤**
```typescript
// æ£€æŸ¥æ‰€æœ‰ /api è·¯ç”±æ˜¯å¦æœ‰é€‚å½“çš„æƒé™éªŒè¯
// ç‰¹åˆ«æ˜¯æ”¯ä»˜ç›¸å…³çš„API

// ç®¡ç†å‘˜APIå¿…é¡»éªŒè¯ç®¡ç†å‘˜æƒé™
const adminEmails = process.env.ADMIN_EMAILS?.split(',') || []
if (!adminEmails.includes(session.user.email)) {
  return Response.json({ error: "éœ€è¦ç®¡ç†å‘˜æƒé™" }, { status: 403 })
}
```

#### âœ… **æ•°æ®åº“æŸ¥è¯¢å®‰å…¨**
```typescript
// ä½¿ç”¨Prisma ORMè‡ªåŠ¨é˜²æ­¢SQLæ³¨å…¥
// ä½†ä»éœ€æ³¨æ„é€»è¾‘æ¼æ´

// âœ… å®‰å…¨ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
const user = await prisma.user.findUnique({
  where: { id: userId }
})

// âŒ å±é™©ï¼šåŠ¨æ€æ„å»ºæŸ¥è¯¢ï¼ˆè™½ç„¶Prismaä¸å…è®¸ï¼Œä½†è¦æ³¨æ„ï¼‰
```

---

## ğŸ”§ APIé…ç½®æŒ‡å—

### ğŸ“ **ç¯å¢ƒå˜é‡é…ç½®**

#### 1ï¸âƒ£ **åˆ›å»º .env.local æ–‡ä»¶**
```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env.local

# ç¼–è¾‘é…ç½®
code .env.local
```

#### 2ï¸âƒ£ **å¿…éœ€çš„ç¯å¢ƒå˜é‡**
```bash
# === æ•°æ®åº“é…ç½® ===
DATABASE_URL="postgresql://username:password@localhost:5432/veo3_db"

# === NextAuthé…ç½® ===
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key-here"

# === Google OAuth ===
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# === GitHub OAuth ===
GITHUB_CLIENT_ID="your-github-client-id"
GITHUB_CLIENT_SECRET="your-github-client-secret"

# === Stripeæ”¯ä»˜ ===
STRIPE_PRIVATE_KEY="sk_test_..."
STRIPE_PUBLIC_KEY="pk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# === Creemæ”¯ä»˜ ===
CREEM_API_KEY="your-creem-api-key"
CREEM_API_URL="https://api.creem.io"
CREEM_WEBHOOK_SECRET="your-creem-webhook-secret"
CREEM_SUCCESS_URL="http://localhost:3000/payment/success"

# === AIæœåŠ¡ ===
SEGMIND_API_KEY="your-segmind-api-key"

# === ç®¡ç†å‘˜é‚®ç®± ===
ADMIN_EMAILS="admin@example.com,manager@example.com"
```

### ğŸ”‘ **è·å–APIå¯†é’¥æŒ‡å—**

#### ğŸ”µ **Stripeé…ç½®**
```bash
# 1. æ³¨å†ŒStripeè´¦æˆ·
# è®¿é—®: https://stripe.com

# 2. è·å–APIå¯†é’¥
# Dashboard â†’ Developers â†’ API keys
# å¤åˆ¶ Publishable key (pk_test_...) å’Œ Secret key (sk_test_...)

# 3. è®¾ç½®Webhook
# Dashboard â†’ Developers â†’ Webhooks
# æ·»åŠ ç«¯ç‚¹: https://yourdomain.com/api/webhooks/stripe
# é€‰æ‹©äº‹ä»¶: checkout.session.completed, payment_intent.succeeded

# 4. è·å–Webhookå¯†é’¥
# ç‚¹å‡»åˆ›å»ºçš„Webhook â†’ Signing secret
```

#### ğŸŸ¢ **Creemé…ç½®**
```bash
# 1. æ³¨å†ŒCreemè´¦æˆ·
# è®¿é—®: https://creem.io

# 2. è·å–APIå¯†é’¥
# Dashboard â†’ Settings â†’ API Keys
# å¤åˆ¶ API Key

# 3. è®¾ç½®Webhook
# Dashboard â†’ Settings â†’ Webhooks
# æ·»åŠ ç«¯ç‚¹: https://yourdomain.com/api/webhooks/creem
# é€‰æ‹©äº‹ä»¶: checkout.completed, subscription.active

# 4. è·å–Webhookå¯†é’¥
# å¤åˆ¶ Webhook Secret
```

#### ğŸ”´ **Google OAuthé…ç½®**
```bash
# 1. è®¿é—®Google Cloud Console
# https://console.cloud.google.com

# 2. åˆ›å»ºé¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®

# 3. å¯ç”¨Google+ API
# APIs & Services â†’ Library â†’ Google+ API â†’ Enable

# 4. åˆ›å»ºOAuth 2.0å‡­æ®
# APIs & Services â†’ Credentials â†’ Create Credentials â†’ OAuth 2.0 Client IDs
# Application type: Web application
# Authorized redirect URIs: http://localhost:3000/api/auth/callback/google

# 5. å¤åˆ¶Client IDå’ŒClient Secret
```

#### âš« **GitHub OAuthé…ç½®**
```bash
# 1. è®¿é—®GitHub Settings
# https://github.com/settings/developers

# 2. åˆ›å»ºæ–°çš„OAuth App
# New OAuth App
# Homepage URL: http://localhost:3000
# Authorization callback URL: http://localhost:3000/api/auth/callback/github

# 3. å¤åˆ¶Client IDå’ŒClient Secret
```

---

## ğŸ® å®é™…æ“ä½œæ¼”ç»ƒ

### ğŸš€ **ç¬¬ä¸€æ¬¡å¯åŠ¨é¡¹ç›®**

#### 1ï¸âƒ£ **å®‰è£…ä¾èµ–**
```bash
# å…‹éš†é¡¹ç›®
git clone <é¡¹ç›®åœ°å€>
cd veo3.us

# å®‰è£…ä¾èµ–
npm install
# æˆ–
bun install
```

#### 2ï¸âƒ£ **é…ç½®æ•°æ®åº“**
```bash
# ç”ŸæˆPrismaå®¢æˆ·ç«¯
npx prisma generate

# æ¨é€æ•°æ®åº“ç»“æ„
npx prisma db push

# æŸ¥çœ‹æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰
npx prisma studio
```

#### 3ï¸âƒ£ **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
# è®¿é—®: http://localhost:3000
```

### ğŸ”§ **æ‰‹åŠ¨æ§åˆ¶æ”¯ä»˜ç³»ç»Ÿ**

#### 1ï¸âƒ£ **æŸ¥çœ‹å½“å‰é…ç½®**
```bash
node scripts/check-payment-config.js
```

#### 2ï¸âƒ£ **ä¿®æ”¹æ”¯ä»˜é…ç½®**
```typescript
// ç¼–è¾‘ src/lib/config/payment.ts

// ç¤ºä¾‹ï¼šåªå¯ç”¨Stripe
export const PAYMENT_CONFIG = {
  STRIPE_ENABLED: true,
  CREEM_ENABLED: false,        // å…³é—­Creem
  DEFAULT_PROVIDER: "stripe",
  MAINTENANCE_MODE: false,
  
  // å¿…å¡«è¯´æ˜
  LAST_UPDATED: "2025-01-20",
  UPDATED_BY: "ä½ çš„åå­—",
  NOTES: "æµ‹è¯•æœŸé—´åªä½¿ç”¨Stripe"
}
```

#### 3ï¸âƒ£ **é‡å¯æœåŠ¡å™¨**
```bash
# Ctrl+C åœæ­¢æœåŠ¡å™¨
# ç„¶åé‡æ–°å¯åŠ¨
npm run dev
```

#### 4ï¸âƒ£ **æäº¤æ›´æ”¹**
```bash
git add src/lib/config/payment.ts
git commit -m "ğŸ”§ ä¿®æ”¹æ”¯ä»˜é…ç½®ï¼šåªå¯ç”¨Stripeç”¨äºæµ‹è¯•"
```

### ğŸ§ª **æµ‹è¯•æ”¯ä»˜åŠŸèƒ½**

#### 1ï¸âƒ£ **Stripeæµ‹è¯•**
```bash
# ä½¿ç”¨Stripeæµ‹è¯•å¡å·
# å¡å·: 4242 4242 4242 4242
# è¿‡æœŸ: ä»»ä½•æœªæ¥æ—¥æœŸ
# CVC: ä»»ä½•3ä½æ•°å­—
```

#### 2ï¸âƒ£ **Creemæµ‹è¯•**
```bash
# ä½¿ç”¨Creemæµ‹è¯•ç¯å¢ƒ
# æŒ‰ç…§Creemæ–‡æ¡£è¿›è¡Œæµ‹è¯•æ”¯ä»˜
```

### ğŸ“Š **ç›‘æ§å’Œè°ƒè¯•**

#### 1ï¸âƒ£ **æŸ¥çœ‹æ—¥å¿—**
```bash
# å¼€å‘ç¯å¢ƒæ—¥å¿—åœ¨ç»ˆç«¯æ˜¾ç¤º
# ç”Ÿäº§ç¯å¢ƒå¯ä»¥ä½¿ç”¨
npm run logs
```

#### 2ï¸âƒ£ **æ•°æ®åº“æŸ¥è¯¢**
```bash
# å¯åŠ¨Prisma Studio
npx prisma studio

# æŸ¥çœ‹æ”¯ä»˜è®¢å•
# è®¿é—®: http://localhost:5555
# é€‰æ‹© PaymentOrder è¡¨
```

#### 3ï¸âƒ£ **APIæµ‹è¯•**
```bash
# ä½¿ç”¨curlæµ‹è¯•API
curl -X GET http://localhost:3000/api/user/profile \
  -H "Authorization: Bearer <token>"
```

---

## ğŸ¯ æ€»ç»“

### ğŸ† **ä½ ç°åœ¨åº”è¯¥ç†è§£çš„æ ¸å¿ƒæ¦‚å¿µ**

1. **é¡¹ç›®ç»“æ„**: Next.js + Prisma + PostgreSQL
2. **åŒæ”¯ä»˜ç³»ç»Ÿ**: Stripe + Creem ç»Ÿä¸€æ•°æ®åº“è®¾è®¡
3. **æ‰‹åŠ¨æ§åˆ¶**: é€šè¿‡é…ç½®æ–‡ä»¶å®‰å…¨æ§åˆ¶æ”¯ä»˜ç³»ç»Ÿ
4. **å®‰å…¨æ£€æŸ¥**: å‚æ•°éªŒè¯ã€æƒé™æ£€æŸ¥ã€WebhookéªŒè¯
5. **APIé…ç½®**: ç¯å¢ƒå˜é‡ã€OAuthã€æ”¯ä»˜å¯†é’¥

### ğŸ“š **ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®**

1. **ç†Ÿæ‚‰ä»£ç **: é˜…è¯» `src/app/api` ä¸‹çš„APIä»£ç 
2. **ç†è§£æ•°æ®æµ**: ä»ç”¨æˆ·ç‚¹å‡»åˆ°æ”¯ä»˜å®Œæˆçš„å®Œæ•´æµç¨‹
3. **å®è·µæ“ä½œ**: ä¿®æ”¹é…ç½®ã€æµ‹è¯•æ”¯ä»˜ã€æŸ¥çœ‹æ•°æ®åº“
4. **å®‰å…¨åŠ å›º**: æ£€æŸ¥æ‰€æœ‰APIçš„æƒé™éªŒè¯
5. **ç›‘æ§ä¼˜åŒ–**: æ·»åŠ æ—¥å¿—ã€é”™è¯¯å¤„ç†ã€æ€§èƒ½ç›‘æ§

### ğŸ†˜ **é‡åˆ°é—®é¢˜æ€ä¹ˆåŠ**

1. **æŸ¥çœ‹æ—¥å¿—**: ç»ˆç«¯è¾“å‡ºå’Œæµè§ˆå™¨æ§åˆ¶å°
2. **æ£€æŸ¥é…ç½®**: ç¯å¢ƒå˜é‡å’Œæ”¯ä»˜é…ç½®
3. **æ•°æ®åº“çŠ¶æ€**: ä½¿ç”¨Prisma StudioæŸ¥çœ‹æ•°æ®
4. **Gitå›æ»š**: å¦‚æœé…ç½®é”™è¯¯ï¼Œå›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
5. **æ–‡æ¡£æŸ¥é˜…**: æŸ¥çœ‹é¡¹ç›®READMEå’Œè¿™ä¸ªæŒ‡å—

---

**ğŸ“ æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ğŸ“… åˆ›å»ºæ—¶é—´**: 2025-01-20  
**ğŸ‘¨â€ğŸ’» ç»´æŠ¤è€…**: æŠ€æœ¯å›¢é˜Ÿ  
**ğŸ¯ é€‚ç”¨äººç¾¤**: ç¼–ç¨‹å°ç™½åˆ°ä¸­çº§å¼€å‘è€… 